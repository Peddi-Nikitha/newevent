(()=>{var e={};e.id=544,e.ids=[544],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},64080:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>i}),a(45587),a(65289),a(35866);var r=a(23191),t=a(88716),l=a(37922),n=a.n(l),o=a(95231),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);a.d(s,d);let i=["",{children:["dashboard",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,45587)),"C:\\Users\\S\\Downloads\\eveplan\\eveplan\\app\\dashboard\\profile\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,65289)),"C:\\Users\\S\\Downloads\\eveplan\\eveplan\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\S\\Downloads\\eveplan\\eveplan\\app\\dashboard\\profile\\page.tsx"],m="/dashboard/profile/page",u={require:a,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/dashboard/profile/page",pathname:"/dashboard/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},3736:(e,s,a)=>{Promise.resolve().then(a.bind(a,72687))},72687:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>i});var r=a(10326),t=a(17577),l=a(77109),n=a(35047),o=a(72416),d=a(90434);function i(){let{data:e,status:s,update:a}=(0,l.useSession)();(0,n.useRouter)();let[i,c]=(0,t.useState)(!0),[m,u]=(0,t.useState)(!1),[p,h]=(0,t.useState)({type:"",text:""}),[x,b]=(0,t.useState)({fullName:"",email:"",phone:"",currentPassword:"",newPassword:"",confirmPassword:""}),f=e=>{let{name:s,value:a}=e.target;b(e=>({...e,[s]:a}))},w=async s=>{s.preventDefault();try{u(!0),h({type:"",text:""});let s=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:x.fullName,phone:x.phone})}),r=await s.json();if(!s.ok)throw Error(r.message||"Failed to update profile");await a({...e,user:{...e?.user,name:x.fullName}}),h({type:"success",text:"Profile updated successfully!"})}catch(e){h({type:"error",text:e.message})}finally{u(!1)}},g=async e=>{if(e.preventDefault(),x.newPassword!==x.confirmPassword){h({type:"error",text:"New passwords do not match"});return}if(x.newPassword.length<8){h({type:"error",text:"Password must be at least 8 characters"});return}try{u(!0),h({type:"",text:""});let e=await fetch("/api/user/password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:x.currentPassword,newPassword:x.newPassword})}),s=await e.json();if(!e.ok)throw Error(s.message||"Failed to update password");b({...x,currentPassword:"",newPassword:"",confirmPassword:""}),h({type:"success",text:"Password updated successfully!"})}catch(e){h({type:"error",text:e.message})}finally{u(!1)}};return i?r.jsx(o.Z,{children:r.jsx("div",{className:"container mx-auto py-16 px-4",children:r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})})}):r.jsx(o.Z,{children:r.jsx("div",{className:"container mx-auto py-16 px-4",children:(0,r.jsxs)("div",{className:"flex flex-wrap -mx-4",children:[r.jsx("div",{className:"w-full md:w-1/4 px-4 mb-8",children:(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 mx-auto mb-4 flex items-center justify-center",children:r.jsx("span",{className:"text-3xl text-gray-500",children:e?.user?.name?.charAt(0).toUpperCase()||"U"})}),r.jsx("h2",{className:"text-xl font-semibold",children:e?.user?.name||"User"}),r.jsx("p",{className:"text-gray-600",children:e?.user?.email})]}),r.jsx("nav",{className:"dashboard-nav",children:(0,r.jsxs)("ul",{children:[r.jsx("li",{className:"mb-1",children:r.jsx(d.default,{href:"/dashboard",className:"block py-2 px-4 rounded hover:bg-gray-100",children:"Dashboard"})}),r.jsx("li",{className:"mb-1",children:r.jsx(d.default,{href:"/dashboard/events",className:"block py-2 px-4 rounded hover:bg-gray-100",children:"My Events"})}),r.jsx("li",{className:"mb-1",children:r.jsx(d.default,{href:"/dashboard/bookings",className:"block py-2 px-4 rounded hover:bg-gray-100",children:"My Bookings"})}),r.jsx("li",{className:"mb-1",children:r.jsx(d.default,{href:"/dashboard/profile",className:"block py-2 px-4 rounded bg-primary text-white",children:"Profile Settings"})})]})})]})}),r.jsx("div",{className:"w-full md:w-3/4 px-4",children:(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-8",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Profile Settings"}),p.text&&r.jsx("div",{className:`p-4 mb-6 rounded ${"success"===p.type?"bg-green-100 text-green-700 border border-green-400":"bg-red-100 text-red-700 border border-red-400"}`,children:p.text}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Personal Information"}),(0,r.jsxs)("form",{onSubmit:w,children:[(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"fullName",className:"form-label",children:"Full Name"}),r.jsx("input",{type:"text",id:"fullName",name:"fullName",value:x.fullName,onChange:f,className:"form-input",required:!0})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),r.jsx("input",{type:"email",id:"email",name:"email",value:x.email,className:"form-input bg-gray-100",disabled:!0}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Email cannot be changed"})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("label",{htmlFor:"phone",className:"form-label",children:"Phone Number"}),r.jsx("input",{type:"tel",id:"phone",name:"phone",value:x.phone,onChange:f,className:"form-input",placeholder:"(123) 456-7890"})]}),r.jsx("button",{type:"submit",className:`btn btn-primary ${m?"opacity-70 cursor-not-allowed":""}`,disabled:m,children:m?"Saving...":"Save Changes"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Change Password"}),(0,r.jsxs)("form",{onSubmit:g,children:[(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"currentPassword",className:"form-label",children:"Current Password"}),r.jsx("input",{type:"password",id:"currentPassword",name:"currentPassword",value:x.currentPassword,onChange:f,className:"form-input",required:!0})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"newPassword",className:"form-label",children:"New Password"}),r.jsx("input",{type:"password",id:"newPassword",name:"newPassword",value:x.newPassword,onChange:f,className:"form-input",required:!0,minLength:8}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"At least 8 characters"})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("label",{htmlFor:"confirmPassword",className:"form-label",children:"Confirm New Password"}),r.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:x.confirmPassword,onChange:f,className:"form-input",required:!0})]}),r.jsx("button",{type:"submit",className:`btn btn-primary ${m?"opacity-70 cursor-not-allowed":""}`,disabled:m,children:m?"Updating...":"Update Password"})]})]})]})]})})]})})})}},35047:(e,s,a)=>{"use strict";var r=a(77389);a.o(r,"notFound")&&a.d(s,{notFound:function(){return r.notFound}}),a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(s,{useSearchParams:function(){return r.useSearchParams}})},45587:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`C:\Users\S\Downloads\eveplan\eveplan\app\dashboard\profile\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[276,171,434,377],()=>a(64080));module.exports=r})();