"use strict";(()=>{var e={};e.id=147,e.ids=[147],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4278:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>v,patchFetch:()=>m,requestAsyncStorage:()=>u,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g});var i={};t.r(i),t.d(i,{GET:()=>c});var o=t(49303),a=t(88716),n=t(60670),s=t(87070),p=t(72331);let d=e=>({id:e,businessName:"Perfect Shots Photography",category:"PHOTOGRAPHY",location:"New York, NY",minPrice:500,maxPrice:3e3,rating:4.8,description:"Professional photography services for all types of events. We capture your special moments with artistic vision and technical excellence.",profileImg:"https://images.unsplash.com/photo-1542038784456-1ea8e935640e",services:[{id:"s1",title:"Basic Wedding Package",description:"6 hours of coverage, 1 photographer, 200 edited digital photos, online gallery",price:1200},{id:"s2",title:"Premium Wedding Package",description:"10 hours of coverage, 2 photographers, engagement session, 500 edited digital photos, online gallery, wedding album",price:2500},{id:"s3",title:"Corporate Event Coverage",description:"4 hours of coverage, 1 photographer, 100 edited digital photos, online gallery",price:800}],reviews:[{id:"r1",rating:5,reviewText:"Amazing work! The photos were gorgeous and the photographer was so professional.",user:{fullName:"John Smith"},createdAt:new Date(Date.now()-6048e5).toISOString()},{id:"r2",rating:4,reviewText:"Great photos, very happy with the results. Would recommend!",user:{fullName:"Jane Doe"},createdAt:new Date(Date.now()-12096e5).toISOString()}]});async function c(e,{params:r}){try{let{id:e}=r;try{let r=`
        SELECT v.* 
        FROM "Vendor" v
        WHERE v.id = $1
      `,t=await p.Z.$queryRawUnsafe(r,e);if(!t||0===t.length)return s.NextResponse.json(d(e));let i=t[0],o=`
        SELECT s.* 
        FROM "Service" s
        WHERE s."vendorid" = $1
      `,a=await p.Z.$queryRawUnsafe(o,e),n=`
        SELECT r.* 
        FROM "Review" r
        WHERE r."vendorid" = $1
        ORDER BY r."createdat" DESC
        LIMIT 5
      `,c=await p.Z.$queryRawUnsafe(n,e),l={id:i.id,businessName:i.businessname||"Unknown Business",category:i.category||"OTHER",location:i.location||"Unknown Location",minPrice:i.minprice||0,maxPrice:i.maxprice||0,rating:i.rating||0,description:i.description||"No description available",profileImg:i.profileimg||"https://images.unsplash.com/photo-1519167758481-83f550bb49b3",services:a.map(e=>({id:e.id,title:e.title||"Unknown Service",description:e.description||"No description available",price:e.price||0})),reviews:c.map(e=>({id:e.id,rating:e.rating||5,reviewText:e.reviewtext||"",user:{fullName:"Anonymous User"},createdAt:e.createdat?new Date(e.createdat).toISOString():new Date().toISOString()}))};return s.NextResponse.json(l)}catch(r){return console.error("Database error:",r),s.NextResponse.json(d(e))}}catch(e){return console.error("Error fetching vendor:",e),s.NextResponse.json({error:"Failed to fetch vendor"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/vendors/[id]/route",pathname:"/api/vendors/[id]",filename:"route",bundlePath:"app/api/vendors/[id]/route"},resolvedPagePath:"C:\\Users\\S\\Downloads\\eveplan\\eveplan\\app\\api\\vendors\\[id]\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:u,staticGenerationAsyncStorage:g,serverHooks:h}=l,v="/api/vendors/[id]/route";function m(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}},72331:(e,r,t)=>{t.d(r,{Z:()=>o});var i=t(53524);let o=global.prisma||new i.PrismaClient}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[276,972],()=>t(4278));module.exports=i})();