(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38],{9109:function(e,t,a){Promise.resolve().then(a.bind(a,2998))},2998:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var l=a(7437),s=a(2265),r=a(9376),n=a(6945),i=a(7648),d=a(3145);let c=[{value:"",label:"All Event Types"},{value:"WEDDING",label:"Wedding"},{value:"BIRTHDAY",label:"Birthday"},{value:"CORPORATE",label:"Corporate"},{value:"BABY_SHOWER",label:"Baby Shower"},{value:"ANNIVERSARY",label:"Anniversary"},{value:"GRADUATION",label:"Graduation"},{value:"HOLIDAY",label:"Holiday"},{value:"OTHER",label:"Other"},{value:"CONFERENCE",label:"Conference"},{value:"SEMINAR",label:"Seminar"},{value:"WORKSHOP",label:"Workshop"},{value:"GALA",label:"Gala"},{value:"FUNDRAISER",label:"Fundraiser"},{value:"SPORTING_EVENT",label:"Sporting Event"},{value:"FESTIVAL",label:"Festival"},{value:"TRADE_SHOW",label:"Trade Show"},{value:"ART_EXHIBITION",label:"Art Exhibition"},{value:"MUSIC_CONCERT",label:"Music Concert"}],o=[{value:"",label:"Any Budget"},{value:"1000-5000",label:"$1,000 - $5,000"},{value:"5000-10000",label:"$5,000 - $10,000"},{value:"10000-20000",label:"$10,000 - $20,000"},{value:"20000+",label:"$20,000+"}];function u(){let e=(0,r.useSearchParams)(),t=(0,r.useRouter)(),[a,u]=(0,s.useState)([]),[h,m]=(0,s.useState)(!0),[x,v]=(0,s.useState)(null),[b,g]=(0,s.useState)(e.get("type")||""),[p,f]=(0,s.useState)(e.get("location")||""),[N,j]=(0,s.useState)(e.get("budget")||""),[y,w]=(0,s.useState)(1),[S,E]=(0,s.useState)(!1),R=(0,s.useRef)(null),k=(0,s.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?E(!0):m(!0);try{let a=new URLSearchParams;a.set("page",e.toString()),a.set("limit","10"),b&&a.set("type",b),p&&a.set("location",p),N&&a.set("budget",N);let l=await fetch("/api/events?".concat(a.toString()));if(!l.ok)throw Error("Failed to fetch events");let s=await l.json();t?u(e=>[...e,...s.events]):u(s.events),v(s.pagination),w(e)}catch(e){console.error("Error fetching events:",e)}finally{t?E(!1):m(!1)}},[b,p,N]);(0,s.useEffect)(()=>{k(1,!1)},[k]),(0,s.useEffect)(()=>{let e=new IntersectionObserver(e=>{let[t]=e;t.isIntersecting&&(null==x?void 0:x.hasMore)&&!S&&k(y+1,!0)},{rootMargin:"100px"});return R.current&&e.observe(R.current),()=>{R.current&&e.unobserve(R.current)}},[x,S,y,k]);let C=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),A=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e);return(0,l.jsx)(n.Z,{children:(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-8 text-heading-primary",children:"Explore Events"}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[(0,l.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"eventType",className:"block text-text-light mb-2",children:"Event Type"}),(0,l.jsx)("select",{id:"eventType",value:b,onChange:e=>g(e.target.value),className:"w-full border border-gray-300 rounded-md p-2",children:c.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"location",className:"block text-text-light mb-2",children:"Location"}),(0,l.jsx)("input",{id:"location",type:"text",value:p,onChange:e=>f(e.target.value),placeholder:"City, State",className:"w-full border border-gray-300 rounded-md p-2"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"budget",className:"block text-text-light mb-2",children:"Budget"}),(0,l.jsx)("select",{id:"budget",value:N,onChange:e=>j(e.target.value),className:"w-full border border-gray-300 rounded-md p-2",children:o.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,l.jsx)("div",{className:"mt-6 text-center",children:(0,l.jsx)("button",{onClick:()=>{let e=new URLSearchParams;b&&e.set("type",b),p&&e.set("location",p),N&&e.set("budget",N),t.push("/events?".concat(e.toString())),w(1),k(1,!1)},className:"bg-cta-primary hover:bg-cta-hover text-white font-bold py-2 px-6 rounded-lg shadow-md transition-all duration-300 hover:shadow-lg",children:"Search Events"})})]}),h?(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-cta-primary"}),(0,l.jsx)("p",{className:"mt-2 text-text-light",children:"Loading events..."})]}):0===a.length?(0,l.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow-md",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto text-accent-dark mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,l.jsx)("h3",{className:"text-xl font-bold mb-2 text-heading-primary",children:"No events found"}),(0,l.jsx)("p",{className:"text-text-light mb-6",children:"Try adjusting your search criteria"}),(0,l.jsx)("button",{onClick:()=>{g(""),f(""),j(""),t.push("/events")},className:"text-cta-primary hover:underline",children:"Clear all filters"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"grid md:grid-cols-2 gap-6",children:a.map(e=>(0,l.jsxs)(i.default,{href:"/events/".concat(e.id),className:"bg-white rounded-lg shadow-md overflow-hidden transform transition-transform hover:scale-105",children:[(0,l.jsx)("div",{className:"relative w-full h-48",children:(0,l.jsx)(d.default,{src:e.imageUrl,alt:e.eventType,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",className:"object-cover"})}),(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h2",{className:"text-xl font-bold text-heading-primary mb-1",children:[e.eventType.replace("_"," ")," Event"]}),(0,l.jsx)("p",{className:"text-text-light",children:e.location})]}),(0,l.jsx)("div",{className:"bg-accent-light text-heading-primary text-sm font-bold px-3 py-1 rounded-lg",children:A(e.budget)})]}),(0,l.jsx)("p",{className:"text-cta-primary font-medium mb-4",children:C(e.date)}),e.vendors.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-sm text-text-light mb-2",children:"Featured Vendors:"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.vendors.slice(0,3).map(e=>(0,l.jsxs)("div",{className:"flex items-center bg-accent-light rounded-full px-3 py-1",children:[(0,l.jsx)("div",{className:"w-6 h-6 rounded-full overflow-hidden mr-2",children:(0,l.jsx)(d.default,{src:e.profileImg,alt:e.businessName,width:24,height:24,className:"object-cover"})}),(0,l.jsx)("span",{className:"text-sm text-text-dark",children:e.businessName})]},e.id)),e.vendors.length>3&&(0,l.jsx)("div",{className:"bg-accent-light rounded-full px-3 py-1",children:(0,l.jsxs)("span",{className:"text-sm text-text-dark",children:["+",e.vendors.length-3," more"]})})]})]}),(0,l.jsx)("div",{className:"mt-6 text-right",children:(0,l.jsx)("span",{className:"text-cta-primary font-medium hover:underline",children:"View Details â†’"})})]})]},e.id))}),(0,l.jsx)("div",{ref:R,className:"h-10 mt-8 text-center",children:S&&(0,l.jsxs)("div",{className:"flex items-center justify-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-cta-primary mr-3"}),(0,l.jsx)("p",{className:"text-text-light",children:"Loading more events..."})]})}),x&&!S&&(0,l.jsxs)("div",{className:"mt-6 text-center text-text-light",children:["Showing ",a.length," of ",x.total," events",!x.hasMore&&a.length>0&&(0,l.jsx)("p",{className:"mt-2",children:"You've reached the end of the list"})]})]})]})})}},9376:function(e,t,a){"use strict";var l=a(5475);a.o(l,"notFound")&&a.d(t,{notFound:function(){return l.notFound}}),a.o(l,"useRouter")&&a.d(t,{useRouter:function(){return l.useRouter}}),a.o(l,"useSearchParams")&&a.d(t,{useSearchParams:function(){return l.useSearchParams}})}},function(e){e.O(0,[605,648,145,945,971,117,744],function(){return e(e.s=9109)}),_N_E=e.O()}]);